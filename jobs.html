<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <style>
    .about {
  display: -webkit-box;
  -webkit-line-clamp: 3;
  -webkit-box-orient: vertical;
  overflow: hidden;
  margin-bottom: 15px;
}
.job {
padding: 1% 0;
}
.job a{
  margin-top: auto;
  align-self: flex-start;
}

.job .vc_column-inner{
  padding: 4%;
  border: 1px solid rgba(112, 112, 112, 0.1);
  border-radius: 25px 0 0 0;
}
.job:hover .vc_column-inner{
   box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19) !important;
}
  </style>
  <body>
    <div id="jobs"></div>
    <script>
      fetch("https://odoo.develop.saner.gy/fetch-jobs?company_id=2")
        .then((response) => {
          if (response.status >= 400 && response.status < 600) {
            throw new Error("Bad response from server");
          }
          return response;
        })
        .then((response) => {
          // console.log(response)
          return response.json();
        })
        .then((data) => {
          // console.log(data);
          jobs = data;
          length = jobs.length;
          var jobContent = "";
          jobContent += "<h2>Current Vacancies</h2>";
          jobContent += "<hr>";
          jobContent += "<div class='wpb_row vc_row-fluid vc_row inner_row  vc_row-o-equal-height vc_row-flex'>"
          jobContent += "<div class='row_col_wrap_12_inner col span_12  left jobs'>";
          for (i = 0; i < length; i++) {
            jobContent +=
              "<div class='job vc_col-sm-4 wpb_column column_container vc_column_container col child_column no-extra-padding inherit_tablet inherit_phone'>";
            jobContent +="<div class='vc_column-inner'>"    
            jobContent +=
              (jobs[i].job_location === null) | (jobs[i].job_location === "")
                ? ""
                : jobs[i].job_location;
            jobContent += "<h3>" + jobs[i].role_name + "</h3>";
            // jobContent += "<div>";

            // jobContent +=
            //   (jobs[i].application_deadline === null) |
            //   (jobs[i].application_deadline === "")
            //     ? ""
            //     : " | <b>Application Deadline:</b> " +
            //       jobs[i].application_deadline;
            // jobContent +=
            //   (jobs[i].start_date === null) | (jobs[i].start_date === "")
            //     ? ""
            //     : " | <b>Start Date:</b> " + jobs[i].start_date;
            // jobContent += "</div>";
            jobContent += "<div class='about'>";
            jobContent +=
              (jobs[i].about_role === null) | (jobs[i].about_role === "")
                ? ""
                :jobs[i].about_role;
            jobContent += "</div>";
            // jobContent +=
            //   (jobs[i].duties_and_responsibilities === null) |
            //   (jobs[i].duties_and_responsibilities === "")
            //     ? ""
            //     : "<b>Duties and Responsibilities</b> " +
            //       jobs[i].duties_and_responsibilities;
            // jobContent += "<br>";
            // jobContent +=
            //   (jobs[i].qualifications === null) |
            //   (jobs[i].qualifications === "")
            //     ? ""
            //     : "<b>Job Qualifications</b> " + jobs[i].qualifications;
            jobContent +=
              "<a href='/apply-job/?job_id=" + jobs[i].role_id + "' id='";
            jobContent += jobs[i].role_id;
            jobContent +=
              "'class='nectar-button medium regular extra-color-2 has-icon regular-button'> Apply</a>";
            jobContent += "</div>";
            jobContent += "</div>";
          }
          jobContent += "</div>";
          jobContent += "</div>";
          document.getElementById("jobs").innerHTML = jobContent;
        })
        .catch((error) => {
          // Your error is here!
          document.getElementById("jobs").innerHTML =
            "<h2>No Jobs Available</h2>";
          //console.log(error)
        });
    </script>
  </body>
</html>
